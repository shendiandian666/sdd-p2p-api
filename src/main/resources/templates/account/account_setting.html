<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=1200" />
<title>会员中心_马上多返利网</title>
<meta name="description" content="马上多返利网是一个理财返利平台,为您提供理财返利、P2P返利、网贷返利、投资返利等全方位高收益理财返利活动" />
<dif th:replace="/common/common"/>
</head>
<body>
	<dif th:replace="/common/head"/>

    <dl class="site_th w_1200">
        <dd>当前位置：<a th:href="@{/index}">马上多返利</a><em class="china">&gt;</em>会员中心</dd>
    </dl>

    <div class="clearfix w_1200 i_center white_box">
        <div class="fl w_200 l_box">
            <dl class="l_club">
                <dt class="round_img">
                    <a th:href="@{/page/auth/index}"> <img th:src="@{/images/icon/user_logo.png}" alt=""
						width="100" height="100" />
						<h4><span th:text="${session.safename}"></span></h4>
					</a>
                </dt>
                <dd>
					<a th:href="@{/page/auth/account_order}">交单记录</a>
				</dd>
				<dd>
					<a th:href="@{/page/auth/account_investor}">投资人</a>
				</dd>
				<dd>
					<a th:href="@{/page/auth/account_withdraw}">提现</a>
				</dd>
				<dd class="active">
					<a th:href="@{/page/auth/account_setting}">帐号设置</a>
				</dd>
            </dl>
        </div>
        <!--end左边-->
        <div class="fr w_950 r_box">
    	<h4 class="r_th"><b class="fl th_line_b">帐号设置</b></h4>
	    <ul class="safety_ul clearfix" th:inline="text">
	        <li class="clearfix">
	            <span class="fr">
	                <a href="#" class="safety_btn" id="nickname-change-btn">
	                    设置
	                </a>
	            </span>
	            <span class="r_cell">
	                <h5>昵称</h5>
	                	<p th:if="${accountInfo.nick_name != ''}">昵称：[[${accountInfo.nick_name}]]</p>
	                    <p th:if="${accountInfo.nick_name == ''}">您可以设置一个昵称用于公开显示。</p>
	            </span>
	        </li>
	        <li class="clearfix">
	            <!-- <span class="fr"><a href="#" class="safety_modify" id="mobile-change-btn">修改</a></span> -->
	            <span class="r_cell">
	                <h5>手机验证</h5>
	                <p>您验证的手机： <span th:text="${session.safename}"></span></p>
	            </span>
	        </li>
	        <li class="clearfix">
	            <span class="fr">
	                <a href="#" class="safety_modify" id="qq-change-btn">
	                    修改
	                </a>
	            </span>
	            <span class="r_cell">
	                <h5>联系QQ</h5>
	                    <p th:if="${accountInfo.qq != ''}">您的联系QQ：[[${accountInfo.qq}]]</p>
	                	<p th:if="${accountInfo.qq == ''}">用户交流沟通</p>
	            </span>
	        </li>
	        <li class="clearfix">
	            <span class="fr">
	                <a href="#" class="safety_btn" id="email-change-btn">
	                    设置
	                </a>
	            </span>
	            <span class="r_cell">
	                <h5>通知邮箱</h5>
	                	<p th:if="${accountInfo.mail != ''}">您的邮箱：[[${accountInfo.mail}]]</p>
	                    <p th:if="${accountInfo.mail == ''}">用于接收通知信息，账户余额变动提醒，业务处理通知等。</p>
	            </span>
	        </li>
	        <li class="clearfix">
	            <span class="fr">
	                <a href="#" class="safety_btn" id="alipay-change-btn">
	                    设置
	                </a>
	            </span>
	            <span class="r_cell">
	                <h5>提现帐号</h5>
	                	<p th:if="${accountInfo.alipay_account != ''}">您的支付宝账号：[[${accountInfo.alipay_account}]]</p>
	                    <p th:if="${accountInfo.alipay_account == ''}">用于提现收款。</p>
	            </span>
	        </li>
	        <li class="clearfix">
	            <span class="fr"><a href="#" class="safety_modify" id="password-change-btn">修改</a></span>
	            <span class="r_cell">
	                <h5>登录密码</h5>
	                <p class="orange_text">互联网账号存在被盗风险，建议您定期更改密码以保护账户安全。</p>
	            </span>
	        </li>
	    </ul>
    <div class="cd-popup" id="change-mobile-popup" style="display:none">
        <div class="cd-popup-container set_box">
            <ul class="pass_step clearfix">
                <div class="order_step_line"></div>
                <li class="first active">
                    <div class="order_step_line"></div>
                    <span class="round_r step_num_b">1</span>
                    <p>验证身份</p></li>
                <li>
                    <div class="order_step_line"></div>
                    <span class="round_r step_num_b">2</span>
                    <p>修改已验证手机</p></li>
                <li class="last">
                    <div class="order_step_line"></div>
                    <span class="round_r step_num_b">3</span>
                    <p>完成</p></li>
            </ul>
            <form method="post" action="">
                <input type="hidden" name="token" th:value="${session.token}"/>
                <input type="hidden" name="type" value="50"/>
                <table class="fill_table blue_link">
                    <tr>
                        <th>已验证手机：</th>
                        <td><b class="font_20"><span th:text="${session.safename}"></span></b></td>
                    </tr>
                    <tr>
                        <th><label>请填写手机校验码：</label></th>
                        <td>
                            <input type="text" style="width:140px;" class="fill_text" name="mobile_code"/>
                            <a href="#" class="m_l send-user-mobile-code" data-mobile-code-type="50">获取验证码</a>
                        </td>
                    </tr>
                    <tfoot>
                    <tr>
                        <th></th>
                        <td><input type="submit" class="shop_btn round_s" value="下一步"/></td>
                    </tr>
                    </tfoot>
                </table>
            </form>
            <a href="#" class="cd-popup-close"></a>
        </div>
    </div>
    <div class="cd-popup" id="change-mobile-new-popup" style="display:none">
        <div class="set_box cd-popup-container">
            <ul class="pass_step clearfix">
                <div class="order_step_line"></div>
                <li class="first active">
                    <div class="order_step_line"></div>
                    <span class="round_r step_num_b">1</span>
                    <p>验证身份</p></li>
                <li class="active">
                    <div class="order_step_line"></div>
                    <span class="round_r step_num_b">2</span>
                    <p>修改已验证手机</p></li>
                <li class="last">
                    <div class="order_step_line"></div>
                    <span class="round_r step_num_b">3</span>
                    <p>完成</p></li>
            </ul>
            <form method="post" action="">
            	<input type="hidden" name="token" th:value="${session.token}"/>
                <input type="hidden" name="old_mobile" value=""/>
                <input type="hidden" name="old_mobile_code" value=""/>
                <table class="fill_table blue_link">
                    <tr>
                        <th><label>新手机号：</label></th>
                        <td><input type="text" class="fill_text" name="mobile"/></td>
                    </tr>
                    <tr>
                        <th><label>新手机验证码：</label></th>
                        <td><input type="text" style="width:140px;" class="fill_text" name="mobile_code"/>
                            <a href="#" class="m_l"
                               onclick="return $.sendMobile('#change-mobile-new-popup input[name=mobile]', 51);">获取验证码</a>
                        </td>
                    </tr>
                    <tfoot>
                    <tr>
                        <th></th>
                        <td><input type="submit" class="shop_btn round_s" value="完成"/></td>
                    </tr>
                    </tfoot>
                </table>
            </form>
            <a href="#" class="cd-popup-close"></a>
        </div>
    </div>
    <div class="cd-popup" id="change-mobile-complete-popup" style="display:none">
        <div class="set_box cd-popup-container">
            <div class="ok_box_s pass_ok orange_link link_line">
                <img th:src="@{/images/icon/ok_s.png}" alt="" width="80" height="80"/>
                <h4>新手机设置成功！</h4>
                <p><a href="?" class="shop_btn round_s">确定</a></p>
            </div>
        </div>
    </div>

    <div class="cd-popup" id="change-nickname-popup" style="display:none">
        <div class="cd-popup-container">
            <div class="login_box">
                <h1>设置昵称</h1>
                <form method="post" action="">
                    <input type="hidden" name="token" th:value="${session.token}"/>
                    <dl class="login_fill">
                        <dt>
                            <div class="input_div">
                                <input type="text" class="login_text" name="nickname" placeholder="昵称"/>
                            </div>
                        </dt>
                        <dd style="margin:1em 0 0em 0;">
                            <input type="submit" class="shop_btn login_btn" value="确定"/>
                        </dd>
                    </dl>
                </form>
            </div>
            <a href="#" class="cd-popup-close"></a>
        </div>
    </div>

    <div class="cd-popup" id="change-qq-popup" style="display:none">
        <div class="cd-popup-container">
            <div class="login_box">
                <h1>设置联系QQ</h1>
                <form method="post" action="">
                    <input type="hidden" name="token" th:value="${session.token}"/>
                    <dl class="login_fill">
                        <dt>
                            <div class="input_div">
                                <input type="text" class="login_text" name="qq" placeholder="QQ号码"/>
                            </div>
                        </dt>
                        <dd style="margin:1em 0 0em 0;">
                            <input type="submit" class="shop_btn login_btn" value="确定"/>
                        </dd>
                    </dl>
                </form>
            </div>
            <a href="#" class="cd-popup-close"></a>
        </div>
    </div>

    <div class="cd-popup" id="change-email-popup" style="display:none">
        <div class="cd-popup-container">
            <div class="login_box">
                <h1>设置通知邮箱</h1>
                <form method="post" action="">
                    <input type="hidden" name="token" th:value="${session.token}"/>
                    <dl class="login_fill">
                        <dt>
                            <div class="input_div">
                                <input type="text" class="login_text" name="email" placeholder="邮箱地址"/>
                            </div>
                        </dt>
                        <dd style="margin:1em 0 0em 0;">
                            <input type="submit" class="shop_btn login_btn" value="确定"/>
                        </dd>
                    </dl>
                </form>
            </div>
            <a href="#" class="cd-popup-close"></a>
        </div>
    </div>

    <div class="cd-popup" id="change-alipay-popup" style="display:none">
        <div class="cd-popup-container set_box">
            <ul class="pass_step clearfix">
                <div class="order_step_line"></div>
                <li class="first active">
                    <div class="order_step_line"></div>
                    <span class="round_r step_num_b">1</span>
                    <p>验证身份</p></li>
                <li>
                    <div class="order_step_line"></div>
                    <span class="round_r step_num_b">2</span>
                    <p>修改提现账号</p></li>
                <li class="last">
                    <div class="order_step_line"></div>
                    <span class="round_r step_num_b">3</span>
                    <p>完成</p></li>
            </ul>
            <form method="post" action="">
                <input type="hidden" name="token" th:value="${session.token}"/>
                <input type="hidden" name="mobile" th:value="${session.username}"/>
                <input type="hidden" name="type" value="60"/>
                <table class="fill_table blue_link">
                    <tr>
                        <th>验证手机：</th>
                        <td><b class="font_20"><span th:text="${session.safename}"></span></b></td>
                    </tr>
                    <tr>
                        <th><label>请填写手机校验码：</label></th>
                        <td>
                            <input type="text" style="width:140px;" class="fill_text" name="mobile_code" id="mobile_code"/>
                            <a href="#" class="m_l send-user-mobile-code"  data-mobile-code-type="60">获取验证码</a>
                        </td>
                    </tr>
                    <tfoot>
                    <tr>
                        <th></th>
                        <td><input type="submit" class="shop_btn round_s" value="下一步"/></td>
                    </tr>
                    </tfoot>
                </table>
            </form>
            <a href="#" class="cd-popup-close"></a>
        </div>
    </div>
    <div class="cd-popup" id="change-alipay-set-popup" style="display:none">
        <div class="set_box cd-popup-container">
            <ul class="pass_step clearfix">
                <div class="order_step_line"></div>
                <li class="first active">
                    <div class="order_step_line"></div>
                    <span class="round_r step_num_b">1</span>
                    <p>验证身份</p></li>
                <li class="active">
                    <div class="order_step_line"></div>
                    <span class="round_r step_num_b">2</span>
                    <p>修改提现账号</p></li>
                <li class="last">
                    <div class="order_step_line"></div>
                    <span class="round_r step_num_b">3</span>
                    <p>完成</p></li>
            </ul>
            <form method="post" action="">
                <input type="hidden" name="token" th:value="${session.token}"/>
                <input type="hidden" name="mobile" th:value="${session.username}"/>
                <input type="hidden" name="mobile_code" value=""/>
                <table class="fill_table blue_link">
                    <tr>
                        <th><label>支付宝账号：</label></th>
                        <td><input type="text" class="fill_text" name="alipay_account"/></td>
                    </tr>
                    <tfoot>
                    <tr>
                        <th></th>
                        <td><input type="submit" class="shop_btn round_s" value="完成"/></td>
                    </tr>
                    </tfoot>
                </table>
            </form>
            <a href="#" class="cd-popup-close"></a>
        </div>
    </div>
    <div class="cd-popup" id="change-alipay-complete-popup" style="display:none">
        <div class="set_box cd-popup-container">
            <div class="ok_box_s pass_ok orange_link link_line">
                <img th:src="@{/images/icon/ok_s.png}" alt="" width="80" height="80"/>
                <h4>提现账号设置成功！</h4>
                <p><a href="?" class="shop_btn round_s">确定</a></p>
            </div>
        </div>
    </div>

    <div class="cd-popup" id="change-password-popup" style="display:none">
        <div class="cd-popup-container">
            <div class="login_box">
                <h1>修改登录密码</h1>
                <form method="post" action="">
                    <input type="hidden" name="token" th:value="${session.token}"/>
                    <dl class="login_fill">
                        <div class="input_div">
                            <span class="fl login_arrow login_arrow2 png"></span>
                            <div class="r_cell"><input type="password" name="password" class="login_text" placeholder="原密码"/></div>
                        </div>
                        <div class="input_div">
                            <span class="fl login_arrow login_arrow2 png"></span>
                            <div class="r_cell"><input type="password" name="new_password" class="login_text" placeholder="新密码"/></div>
                        </div>
                        <div class="input_div">
                            <span class="fl login_arrow login_arrow2 png"></span>
                            <div class="r_cell"><input type="password" name="new_password_confirm" class="login_text" placeholder="新密码确认"/></div>
                        </div>
                        <div class="dd" style="padding: 10px;color: gray">
                            修改成功需要您重新登录
                        </div>
                        <dd style="margin:1em 0 0em 0;">
                            <input type="submit" class="shop_btn login_btn" value="确定"/>
                        </dd>
                    </dl>
                </form>
            </div>
            <a href="#" class="cd-popup-close"></a>
        </div>
    </div>

    <script type="text/javascript" th:inline="javascript">
        (function () {
            $('.cd-popup-close').click(function () {
                $('.cd-popup').hide();
                return false;
            });

            // 发送用户手机号验证码
            var mobileCodeSendWait = 0;
            var mobileCodeSendBtn = $('.send-user-mobile-code');
            function mobileCodeWait() {
                if (mobileCodeSendWait > 0) {
                    mobileCodeSendWait--;
                    mobileCodeSendBtn.text('重新发送验证码(' + mobileCodeSendWait + ')');
                    setTimeout(mobileCodeWait, 1000);
                } else {
                    mobileCodeSendBtn.text('重新发送验证码');
                }
            }
            mobileCodeSendBtn.click(function () {
                if (mobileCodeSendWait == 0) {
                    $.post(/*[[@{/api/auth/sms/send_alipay_code}]]*/, 
                   		{
	                    	token: /*[[${session.token}]]*/,
                    		mobile: /*[[${session.username}]]*/,
	                        type: $(this).data('mobile-code-type')
	                    }, function (data) {
                        if (data.status != '200') {
                            layer.msg(data.message);
                            return;
                        }
                        mobileCodeSendWait = 60;
                        mobileCodeWait();
                        layer.msg('已经发送验证码');
                    });
                }
                return false;
            });

            // 修改手机号
            $('#mobile-change-btn').click(function () {
                $('#change-mobile-popup').show();
                return false;
            });
            $.form('#change-mobile-popup form', /*[[@{/api/auth/sms/encrypt_code_valid}]]*/+'', function (data) {
                $('.cd-popup').hide();
                $('#change-mobile-new-popup').show();
                $('input[name=old_mobile_code]').val(data.code);
            });
            // 修改手机号，第二步
            $.form('#change-mobile-new-popup form', /*[[@{/api/auth/account/update_user_mobile}]]*/+'', function (data) {
                $('.cd-popup').hide();
                $('#change-mobile-complete-popup').show();
            });

            // 修改昵称
            $('#nickname-change-btn').click(function () {
                $('#change-nickname-popup').show();
                return false;
            });
            $.form('#change-nickname-popup form', /*[[@{/api/auth/account/update_nickName}]]*/+'', function (data) {
                layer.msg('昵称设置完成');
                $('.cd-popup').hide();
                setTimeout(function () {
                    location.reload();
                }, 1500);
            });

            // 修改邮箱
            $('#email-change-btn').click(function () {
                $('#change-email-popup').show();
                return false;
            });
            $.form('#change-email-popup form', /*[[@{/api/auth/account/update_mail}]]*/+'', function (data) {
                layer.msg('通知邮箱设置完成');
                $('.cd-popup').hide();
                setTimeout(function () {
                    location.reload();
                }, 1500);
            });

            // 修改QQ
            $('#qq-change-btn').click(function () {
                $('#change-qq-popup').show();
                return false;
            });
            $.form('#change-qq-popup form', /*[[@{/api/auth/account/update_qq}]]*/+'', function (data) {
                layer.msg('联系QQ设置完成');
                $('.cd-popup').hide();
                setTimeout(function () {
                    location.reload();
                }, 1500);
            });

            // 提现账号
            $('#alipay-change-btn').click(function () {
            	$('#change-alipay-popup').show();
                return false;
            });
            $.form('#change-alipay-popup form', /*[[@{/api/auth/sms/encrypt_code_valid}]]*/+'', function (data) {
               	$('.cd-popup').hide();
                $('#change-alipay-set-popup').show();
                $('#change-alipay-set-popup input[name=mobile_code]').val($("#mobile_code").val());
            });
            $.form('#change-alipay-set-popup form', /*[[@{/api/auth/account/update_alipay}]]*/+'', function (data) {
                $('.cd-popup').hide();
                $('#change-alipay-complete-popup').show();
            });

            // 修改密码
            $('#password-change-btn').click(function () {
                $('#change-password-popup').show();
                return false;
            });
            $.form('#change-password-popup form', /*[[@{/api/auth/account/update_password}]]*/+'', function (data) {
                if(data.status != '200'){
                	layer.msg(data.message);
                }else{
                	layer.msg('新密码更新完成');
                    $('.cd-popup').hide();
                    setTimeout(function () {
                        location.reload();
                    }, 1000);
                    location.href=/*[[@{/logout}]]*/;
                }
            });
        })();
    </script>
        </div>
    </div>
    <dif th:replace="/common/login_register"/>
	<dif th:replace="/common/footer"/>
</body>
</html>